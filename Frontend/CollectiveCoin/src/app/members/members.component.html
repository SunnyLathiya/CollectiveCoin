<div id="root">
  <div class="fir-div App">
    <div class="emp-div"></div>
    <div class="con-in">
      <app-sidebar></app-sidebar>
      <main>
        <div class="incomes">
          <div
            *ngFor="let i of allmembers$ | async"
            class="income-item"
            style="
              background: #fcf6f9;
              border: 2px solid #ffffff;
              box-shadow: 0px 1px 15px rgba(0, 0, 0, 0.06);
              border-radius: 20px;
              padding: 1rem;
              margin-bottom: 1rem;
              display: flex;
              align-items: center;
              gap: 1rem;
              width: 100%;
              color: #222260;
            "
          >
            <div
              class="icon"
              style="
                width: 80px;
                height: 80px;
                border-radius: 20px;
                background: #f5f5f5;
                display: flex;
                align-items: center;
                justify-content: center;
                border: 2px solid #ffffff;
              "
            >
              <img
                *ngIf="i.role === 'admin'"
                src="https://img.icons8.com/ios/50/admin-settings-male.png"
                alt="admin-settings-male"
              />
              <img
                *ngIf="i.role === 'user'"
                src="https://img.icons8.com/ios/50/user--v1.png"
                alt="user--v1"
              />
            </div>
            <div
              class="content"
              style="
                flex: 1;
                display: flex;
                flex-direction: column;
                gap: 0.2rem;
              "
            >
              <h5
                style="
                  font-size: 1.3rem;
                  padding-left: 2rem;
                  position: relative;
                "
              >
                {{ i.name }}
                <span
                  style="
                    content: '';
                    position: absolute;
                    left: 0;
                    top: 50%;
                    transform: translateY(-50%);
                    width: 0.8rem;
                    height: 0.8rem;
                    border-radius: 50%;
                    background: #1b8f34;
                  "
                ></span>
              </h5>
              <div
                class="inner-content"
                style="
                  display: flex;
                  justify-content: space-between;
                  align-items: center;
                "
              >
                <div
                  class="text"
                  style="display: flex; align-items: center; gap: 1.5rem"
                >
                  <p
                    style="
                      display: flex;
                      align-items: center;
                      gap: 0.5rem;
                      color: var(--primary-color);
                      opacity: 0.8;
                    "
                  >
                    <svg
                      xmlns="http://www.w3.org/2000/svg"
                      width="16"
                      height="16"
                      fill="currentColor"
                      class="bi bi-person-check"
                      viewBox="0 0 16 16"
                    >
                      <path
                        d="M12.5 16a3.5 3.5 0 1 0 0-7 3.5 3.5 0 0 0 0 7m1.679-4.493-1.335 2.226a.75.75 0 0 1-1.174.144l-.774-.773a.5.5 0 0 1 .708-.708l.547.548 1.17-1.951a.5.5 0 1 1 .858.514M11 5a3 3 0 1 1-6 0 3 3 0 0 1 6 0M8 7a2 2 0 1 0 0-4 2 2 0 0 0 0 4"
                      />
                      <path
                        d="M8.256 14a4.5 4.5 0 0 1-.229-1.004H3c.001-.246.154-.986.832-1.664C4.484 10.68 5.711 10 8 10q.39 0 .74.025c.226-.341.496-.65.804-.918Q8.844 9.002 8 9c-5 0-6 3-6 4s1 1 1 1z"
                      />
                    </svg>
                    {{ i.role }}
                  </p>
                  <p
                    style="
                      display: flex;
                      align-items: center;
                      gap: 0.5rem;
                      color: var(--primary-color);
                      opacity: 0.8;
                    "
                  >
                    <svg
                      xmlns="http://www.w3.org/2000/svg"
                      width="16"
                      height="16"
                      fill="currentColor"
                      class="bi bi-cash"
                      viewBox="0 0 16 16"
                    >
                      <path d="M8 10a2 2 0 1 0 0-4 2 2 0 0 0 0 4" />
                      <path
                        d="M0 4a1 1 0 0 1 1-1h14a1 1 0 0 1 1 1v8a1 1 0 0 1-1 1H1a1 1 0 0 1-1-1zm3 0a2 2 0 0 1-2 2v4a2 2 0 0 1 2 2h10a2 2 0 0 1 2-2V6a2 2 0 0 1-2-2z"
                      />
                    </svg>
                    {{ i.isEarning }}
                  </p>
                </div>
                <button
                  *ngIf="
                    (role === 'admin' && priority < i.priority) ||
                    (role === 'admin' && i.role === 'user')
                  "
                  style="
                    padding: 1rem;
                    background: #222260;
                    color: #fcf6f9;
                    border: none;
                    margin-right: -48%;
                    border-radius: 18px;
                    position: sticky;
                  "
                  (click)="makeEarner(i._id)"
                >
                  <span *ngIf="i.isEarning === false">Make Earner</span>
                  <span *ngIf="i.isEarning === true">Make non-Earner</span>
                </button>
                <button
                  *ngIf="
                    (role === 'admin' && priority < i.priority) ||
                    (role === 'admin' && i.role === 'user')
                  "
                  class="bottom-right-btn"
                  style="
                    padding: 1rem;
                    background: #222260;
                    color: #fcf6f9;
                    border: none;
                    margin-right: -48%;
                    border-radius: 18px;
                    position: sticky;
                  "
                  (click)="makeAdmin(i._id)"
                >
                  <span *ngIf="i.role === 'user'"> Make Admin</span>
                  <span *ngIf="i.role === 'admin'"> Make User</span>
                </button>
                <div class="btn-con">
                  <button
                    style="
                      padding: 1rem;
                      border-radius: 80%;
                      background: #222260;
                      color: #fcf6f9;
                      border: none;
                    "
                    [id]="i.id"
                    (click)="deleteMember(i._id)"
                  >
                    <svg
                      xmlns="http://www.w3.org/2000/svg"
                      width="16"
                      height="16"
                      fill="currentColor"
                      class="bi bi-trash3"
                      viewBox="0 0 16 16"
                    >
                      <path
                        d="M6.5 1h3a.5.5 0 0 1 .5.5v1H6v-1a.5.5 0 0 1 .5-.5M11 2.5v-1A1.5 1.5 0 0 0 9.5 0h-3A1.5 1.5 0 0 0 5 1.5v1H1.5a.5.5 0 0 0 0 1h.538l.853 10.66A2 2 0 0 0 4.885 16h6.23a2 2 0 0 0 1.994-1.84l.853-10.66h.538a.5.5 0 0 0 0-1zm1.958 1-.846 10.58a1 1 0 0 1-.997.92h-6.23a1 1 0 0 1-.997-.92L3.042 3.5zm-7.487 1a.5.5 0 0 1 .528.47l.5 8.5a.5.5 0 0 1-.998.06L5 5.03a.5.5 0 0 1 .47-.53Zm5.058 0a.5.5 0 0 1 .47.53l-.5 8.5a.5.5 0 1 1-.998-.06l.5-8.5a.5.5 0 0 1 .528-.47M8 4.5a.5.5 0 0 1 .5.5v8.5a.5.5 0 0 1-1 0V5a.5.5 0 0 1 .5-.5"
                      />
                    </svg>
                  </button>
                </div>
              </div>
            </div>
          </div>
        </div>
        <div class="btn-con">
          <button
            *ngIf="role === 'admin'"
            style="
              padding: 1rem;
              background: #222260;
              color: #fcf6f9;
              border: none;
              margin-left: 45%;
              border-radius: 50px;
            "
            (click)="openbox()"
          >
            <svg
              xmlns="http://www.w3.org/2000/svg"
              width="16"
              height="16"
              fill="currentColor"
              class="bi bi-person-add"
              viewBox="0 0 16 16"
            >
              <path
                d="M12.5 16a3.5 3.5 0 1 0 0-7 3.5 3.5 0 0 0 0 7m.5-5v1h1a.5.5 0 0 1 0 1h-1v1a.5.5 0 0 1-1 0v-1h-1a.5.5 0 0 1 0-1h1v-1a.5.5 0 0 1 1 0m-2-6a3 3 0 1 1-6 0 3 3 0 0 1 6 0M8 7a2 2 0 1 0 0-4 2 2 0 0 0 0 4"
              />
              <path
                d="M8.256 14a4.5 4.5 0 0 1-.229-1.004H3c.001-.246.154-.986.832-1.664C4.484 10.68 5.711 10 8 10q.39 0 .74.025c.226-.341.496-.65.804-.918Q8.844 9.002 8 9c-5 0-6 3-6 4s1 1 1 1z"
              />
            </svg>
            Add Member
          </button>
          <button
            class="bottom-right-btn"
            style="
              padding: 1rem;
              background: #222260;
              color: #fcf6f9;
              border: none;
              margin-left: 83%;
              margin-top: 17%;
              border-radius: 50px;
              position: sticky;
            "
            (click)="openbox2()"
          >
            <svg
              xmlns="http://www.w3.org/2000/svg"
              width="16"
              height="16"
              fill="currentColor"
              class="bi bi-envelope-at"
              viewBox="0 0 16 16"
            >
              <path
                d="M2 2a2 2 0 0 0-2 2v8.01A2 2 0 0 0 2 14h5.5a.5.5 0 0 0 0-1H2a1 1 0 0 1-.966-.741l5.64-3.471L8 9.583l7-4.2V8.5a.5.5 0 0 0 1 0V4a2 2 0 0 0-2-2zm3.708 6.208L1 11.105V5.383zM1 4.217V4a1 1 0 0 1 1-1h12a1 1 0 0 1 1 1v.217l-7 4.2z"
              />
              <path
                d="M14.247 14.269c1.01 0 1.587-.857 1.587-2.025v-.21C15.834 10.43 14.64 9 12.52 9h-.035C10.42 9 9 10.36 9 12.432v.214C9 14.82 10.438 16 12.358 16h.044c.594 0 1.018-.074 1.237-.175v-.73c-.245.11-.673.18-1.18.18h-.044c-1.334 0-2.571-.788-2.571-2.655v-.157c0-1.657 1.058-2.724 2.64-2.724h.04c1.535 0 2.484 1.05 2.484 2.326v.118c0 .975-.324 1.39-.639 1.39-.232 0-.41-.148-.41-.42v-2.19h-.906v.569h-.03c-.084-.298-.368-.63-.954-.63-.778 0-1.259.555-1.259 1.4v.528c0 .892.49 1.434 1.26 1.434.471 0 .896-.227 1.014-.643h.043c.118.42.617.648 1.12.648m-2.453-1.588v-.227c0-.546.227-.791.573-.791.297 0 .572.192.572.708v.367c0 .573-.253.744-.564.744-.354 0-.581-.215-.581-.8Z"
              />
            </svg>
            Email Admin
          </button>
          <button
            *ngIf="role === 'admin'"
            class="bottom-right-btn"
            style="
              padding: 1rem;
              background: #222260;
              color: #fcf6f9;
              border: none;
              margin-left: 83%;
              margin-top: 17%;
              border-radius: 50px;
              position: sticky;
            "
            (click)="deletefamily()"
          >
            <svg
              xmlns="http://www.w3.org/2000/svg"
              width="16"
              height="16"
              fill="currentColor"
              class="bi bi-trash3"
              viewBox="0 0 16 16"
            >
              <path
                d="M6.5 1h3a.5.5 0 0 1 .5.5v1H6v-1a.5.5 0 0 1 .5-.5M11 2.5v-1A1.5 1.5 0 0 0 9.5 0h-3A1.5 1.5 0 0 0 5 1.5v1H1.5a.5.5 0 0 0 0 1h.538l.853 10.66A2 2 0 0 0 4.885 16h6.23a2 2 0 0 0 1.994-1.84l.853-10.66h.538a.5.5 0 0 0 0-1zm1.958 1-.846 10.58a1 1 0 0 1-.997.92h-6.23a1 1 0 0 1-.997-.92L3.042 3.5zm-7.487 1a.5.5 0 0 1 .528.47l.5 8.5a.5.5 0 0 1-.998.06L5 5.03a.5.5 0 0 1 .47-.53Zm5.058 0a.5.5 0 0 1 .47.53l-.5 8.5a.5.5 0 1 1-.998-.06l.5-8.5a.5.5 0 0 1 .528-.47M8 4.5a.5.5 0 0 1 .5.5v8.5a.5.5 0 0 1-1 0V5a.5.5 0 0 1 .5-.5"
              />
            </svg>
            Delete Family
          </button>
        </div>
      </main>
    </div>
  </div>
</div>

<div id="contactForm2">
  <h1>Keep in touch!</h1>
  <small style="color: #222260"
    >Admin will get back to you as quickly as possible</small
  >

  <form [formGroup]="memberrform">
    <input placeholder="Email" formControlName="email" type="email" required />

    <button class="formBtn" (click)="addmember()">Add</button>
    <button class="formBtn" (click)="closebox()" style="margin-left: 10px">
      close
    </button>
  </form>
</div>

<div id="contactForm">
  <h1>Keep in touch!</h1>
  <small style="color: #222260"
    >Admin will get back to you as quickly as possible</small
  >

  <form [formGroup]="emailform">
    <input formControlName="email" placeholder="Email" type="email" required />
    <textarea formControlName="message" placeholder="Comment"></textarea>
    <button class="formBtn" (click)="emailAdmin()">send</button>
    <button class="formBtn" (click)="closebox2()" style="margin-left: 10px">
      close
    </button>
  </form>
</div>

<div
  id="overlay"
  class="overlay"
  (click)="closebox()"
  (click)="closebox2()"
></div>
